{"changed":true,"filter":false,"title":"followTarget.js","tooltip":"/dev/public/js/topdownshooter/followTarget.js","value":"/*\n * Sprite follows the target.\n */\nfunction FollowTarget(game, position, target, resourceName) {\n\n\n    Phaser.Sprite.call(this, game, position.x, position.y, resourceName);\n\n    // Add sprite to game\n    game.add.existing(this);\n    \n    // Set the game variable for update\n    this.game = game;\n    \n    // Anchor dat shit\n    this.anchor.set(0.5);\n   \n    // Speed of movement\n    this.speed = game.rnd.between(10, 50);\n    \n    // Assign target that the object follows\n    this.target = target;\n\n    // Enable physics for dis sprite\n    game.physics.enable(this, Phaser.Physics.ARCADE);\n    \n    this.body.collideWorldBounds = true;\n    \n    this.body.setSize(52, 52, -5, -10);\n    \n    \n    \n\n}\n// Inherit the Phaser.Sprite prototype\nFollowTarget.prototype = Object.create(Phaser.Sprite.prototype);\n\n// Assign the new constructor to FollowTarget constructor\nFollowTarget.prototype.constructor = FollowTarget;\n\n\n\n\n/*\n *  Update function called with every game update\n */\nFollowTarget.prototype.update = function() {\n\n    //  If the sprite is > 8px away from the pointer then let's move to it\n    if (this.game.physics.arcade.distanceBetween(this, this.target) > 2) {\n\n        //  Make the object seek to the active pointer (mouse or touch).\n        this.game.physics.arcade.moveToObject(this, this.target, this.speed);\n\n    }\n    else {\n\n        //  Otherwise turn off velocity because we're close enough to the pointer\n        this.body.velocity.set(0);\n    }\n\n\n    // If this sprite intersects with the target this call function collisionHandler\n    this.game.physics.arcade.collide(this, this.target, this.collisionHandler, null, this);\n    \n    this.rotation = this.game.physics.arcade.angleBetween(this, this.target);\n    \n   \n    // Make the player on top of graphics\n  //  this.game.world.bringToTop(this);\n    \n\n};\n\n\n/*\n * This function is called when this sprite collides with the target.\n */\nFollowTarget.prototype.collisionHandler = function(followingTarget, mainChar) {\n\n    //  Kill main character\n    mainChar.kill();\n\n};\n\n\n","undoManager":{"mark":98,"position":100,"stack":[[{"start":{"row":85,"column":42},"end":{"row":85,"column":43},"action":"remove","lines":["o"],"id":1112}],[{"start":{"row":85,"column":41},"end":{"row":85,"column":42},"action":"remove","lines":["f"],"id":1113}],[{"start":{"row":85,"column":28},"end":{"row":85,"column":29},"action":"remove","lines":["r"],"id":1114}],[{"start":{"row":85,"column":27},"end":{"row":85,"column":28},"action":"remove","lines":["e"],"id":1115}],[{"start":{"row":85,"column":26},"end":{"row":85,"column":27},"action":"remove","lines":["d"],"id":1116}],[{"start":{"row":85,"column":25},"end":{"row":85,"column":26},"action":"remove","lines":["n"],"id":1117}],[{"start":{"row":85,"column":24},"end":{"row":85,"column":25},"action":"remove","lines":["e"],"id":1118}],[{"start":{"row":85,"column":24},"end":{"row":85,"column":25},"action":"insert","lines":["e"],"id":1119}],[{"start":{"row":85,"column":25},"end":{"row":85,"column":26},"action":"insert","lines":["n"],"id":1120}],[{"start":{"row":85,"column":26},"end":{"row":85,"column":27},"action":"insert","lines":["d"],"id":1121}],[{"start":{"row":85,"column":27},"end":{"row":85,"column":28},"action":"insert","lines":["e"],"id":1122}],[{"start":{"row":85,"column":28},"end":{"row":85,"column":29},"action":"insert","lines":["r"],"id":1123}],[{"start":{"row":85,"column":0},"end":{"row":89,"column":2},"action":"remove","lines":["FollowTarget.prototype.render = function() {","","    this.game.debug.body(this);","","};"],"id":1124}],[{"start":{"row":84,"column":0},"end":{"row":85,"column":0},"action":"remove","lines":["",""],"id":1125}],[{"start":{"row":28,"column":41},"end":{"row":28,"column":42},"action":"remove","lines":["5"],"id":1126}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"remove","lines":["7"],"id":1127}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"insert","lines":["5"],"id":1128}],[{"start":{"row":29,"column":42},"end":{"row":29,"column":43},"action":"remove","lines":["7"],"id":1129}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"insert","lines":["1"],"id":1130}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"remove","lines":["1"],"id":1131}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"insert","lines":["3"],"id":1132}],[{"start":{"row":29,"column":42},"end":{"row":29,"column":43},"action":"insert","lines":["3"],"id":1133}],[{"start":{"row":29,"column":42},"end":{"row":29,"column":43},"action":"remove","lines":["3"],"id":1134}],[{"start":{"row":29,"column":42},"end":{"row":29,"column":43},"action":"insert","lines":["1"],"id":1135}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"remove","lines":["3"],"id":1136}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"insert","lines":["5"],"id":1137}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"remove","lines":["5"],"id":1138}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"insert","lines":["7"],"id":1139}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"remove","lines":["7"],"id":1140}],[{"start":{"row":28,"column":40},"end":{"row":28,"column":41},"action":"insert","lines":["9"],"id":1141}],[{"start":{"row":29,"column":45},"end":{"row":30,"column":0},"action":"insert","lines":["",""],"id":1142},{"start":{"row":30,"column":0},"end":{"row":30,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":30,"column":4},"end":{"row":31,"column":0},"action":"insert","lines":["",""],"id":1143},{"start":{"row":31,"column":0},"end":{"row":31,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":31,"column":4},"end":{"row":32,"column":37},"action":"insert","lines":["// Make the player on top of graphics","    this.game.world.bringToTop(this);"],"id":1144}],[{"start":{"row":31,"column":4},"end":{"row":32,"column":37},"action":"remove","lines":["// Make the player on top of graphics","    this.game.world.bringToTop(this);"],"id":1145}],[{"start":{"row":69,"column":4},"end":{"row":70,"column":37},"action":"insert","lines":["// Make the player on top of graphics","    this.game.world.bringToTop(this);"],"id":1146}],[{"start":{"row":28,"column":4},"end":{"row":29,"column":45},"action":"remove","lines":["this.body.width = this.body.width - 95;","    this.body.height = this.body.height - 15;"],"id":1147},{"start":{"row":28,"column":4},"end":{"row":28,"column":36},"action":"insert","lines":["this.body.setSize(25, 25, 0, 0);"]}],[{"start":{"row":28,"column":23},"end":{"row":28,"column":24},"action":"remove","lines":["5"],"id":1148}],[{"start":{"row":28,"column":22},"end":{"row":28,"column":23},"action":"remove","lines":["2"],"id":1149}],[{"start":{"row":28,"column":22},"end":{"row":28,"column":23},"action":"insert","lines":["5"],"id":1150}],[{"start":{"row":28,"column":23},"end":{"row":28,"column":24},"action":"insert","lines":["0"],"id":1151}],[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"remove","lines":["5"],"id":1152}],[{"start":{"row":28,"column":26},"end":{"row":28,"column":27},"action":"remove","lines":["2"],"id":1153}],[{"start":{"row":28,"column":26},"end":{"row":28,"column":27},"action":"insert","lines":["5"],"id":1154}],[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"insert","lines":["0"],"id":1155}],[{"start":{"row":28,"column":22},"end":{"row":28,"column":23},"action":"remove","lines":["5"],"id":1156}],[{"start":{"row":28,"column":22},"end":{"row":28,"column":23},"action":"insert","lines":["6"],"id":1157}],[{"start":{"row":28,"column":26},"end":{"row":28,"column":27},"action":"remove","lines":["5"],"id":1158}],[{"start":{"row":28,"column":26},"end":{"row":28,"column":27},"action":"insert","lines":["6"],"id":1159}],[{"start":{"row":28,"column":26},"end":{"row":28,"column":27},"action":"remove","lines":["6"],"id":1160}],[{"start":{"row":28,"column":26},"end":{"row":28,"column":27},"action":"insert","lines":["5"],"id":1161}],[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"remove","lines":["("],"id":1162}],[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"insert","lines":["5"],"id":1163}],[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"remove","lines":["5"],"id":1164}],[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"insert","lines":[")"],"id":1165}],[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"remove","lines":[")"],"id":1166}],[{"start":{"row":28,"column":21},"end":{"row":28,"column":22},"action":"insert","lines":["("],"id":1167}],[{"start":{"row":28,"column":22},"end":{"row":28,"column":23},"action":"remove","lines":["6"],"id":1168}],[{"start":{"row":28,"column":22},"end":{"row":28,"column":23},"action":"insert","lines":["5"],"id":1169}],[{"start":{"row":28,"column":23},"end":{"row":28,"column":24},"action":"remove","lines":["0"],"id":1170}],[{"start":{"row":28,"column":23},"end":{"row":28,"column":24},"action":"insert","lines":["2"],"id":1171}],[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"remove","lines":["0"],"id":1172}],[{"start":{"row":28,"column":27},"end":{"row":28,"column":28},"action":"insert","lines":["2"],"id":1173}],[{"start":{"row":28,"column":30},"end":{"row":28,"column":31},"action":"insert","lines":["1"],"id":1174}],[{"start":{"row":28,"column":30},"end":{"row":28,"column":31},"action":"remove","lines":["1"],"id":1175}],[{"start":{"row":28,"column":33},"end":{"row":28,"column":34},"action":"insert","lines":["1"],"id":1176}],[{"start":{"row":28,"column":33},"end":{"row":28,"column":34},"action":"insert","lines":["-"],"id":1177}],[{"start":{"row":28,"column":30},"end":{"row":28,"column":31},"action":"insert","lines":["-"],"id":1178}],[{"start":{"row":28,"column":31},"end":{"row":28,"column":32},"action":"insert","lines":["1"],"id":1179}],[{"start":{"row":28,"column":32},"end":{"row":28,"column":33},"action":"remove","lines":["0"],"id":1180}],[{"start":{"row":28,"column":31},"end":{"row":28,"column":32},"action":"remove","lines":["1"],"id":1181}],[{"start":{"row":28,"column":31},"end":{"row":28,"column":32},"action":"insert","lines":["5"],"id":1182}],[{"start":{"row":69,"column":37},"end":{"row":69,"column":38},"action":"insert","lines":[" "],"id":1183}],[{"start":{"row":69,"column":38},"end":{"row":69,"column":39},"action":"insert","lines":["b"],"id":1184}],[{"start":{"row":69,"column":39},"end":{"row":69,"column":40},"action":"insert","lines":["r"],"id":1185}],[{"start":{"row":69,"column":40},"end":{"row":69,"column":41},"action":"insert","lines":["i"],"id":1186}],[{"start":{"row":69,"column":41},"end":{"row":69,"column":42},"action":"insert","lines":["n"],"id":1187}],[{"start":{"row":69,"column":42},"end":{"row":69,"column":43},"action":"insert","lines":["g"],"id":1188}],[{"start":{"row":69,"column":43},"end":{"row":69,"column":44},"action":"insert","lines":["T"],"id":1189}],[{"start":{"row":69,"column":44},"end":{"row":69,"column":45},"action":"insert","lines":["o"],"id":1190}],[{"start":{"row":69,"column":45},"end":{"row":69,"column":46},"action":"insert","lines":["B"],"id":1191}],[{"start":{"row":69,"column":46},"end":{"row":69,"column":47},"action":"insert","lines":["o"],"id":1192}],[{"start":{"row":69,"column":47},"end":{"row":69,"column":48},"action":"insert","lines":["t"],"id":1193}],[{"start":{"row":69,"column":48},"end":{"row":69,"column":49},"action":"insert","lines":["t"],"id":1194}],[{"start":{"row":69,"column":49},"end":{"row":69,"column":50},"action":"insert","lines":["o"],"id":1195}],[{"start":{"row":69,"column":50},"end":{"row":69,"column":51},"action":"insert","lines":["m"],"id":1196}],[{"start":{"row":69,"column":50},"end":{"row":69,"column":51},"action":"remove","lines":["m"],"id":1197}],[{"start":{"row":69,"column":49},"end":{"row":69,"column":50},"action":"remove","lines":["o"],"id":1198}],[{"start":{"row":69,"column":48},"end":{"row":69,"column":49},"action":"remove","lines":["t"],"id":1199}],[{"start":{"row":69,"column":47},"end":{"row":69,"column":48},"action":"remove","lines":["t"],"id":1200}],[{"start":{"row":69,"column":46},"end":{"row":69,"column":47},"action":"remove","lines":["o"],"id":1201}],[{"start":{"row":69,"column":45},"end":{"row":69,"column":46},"action":"remove","lines":["B"],"id":1202}],[{"start":{"row":69,"column":44},"end":{"row":69,"column":45},"action":"remove","lines":["o"],"id":1203}],[{"start":{"row":69,"column":43},"end":{"row":69,"column":44},"action":"remove","lines":["T"],"id":1204}],[{"start":{"row":69,"column":42},"end":{"row":69,"column":43},"action":"remove","lines":["g"],"id":1205}],[{"start":{"row":69,"column":41},"end":{"row":69,"column":42},"action":"remove","lines":["n"],"id":1206}],[{"start":{"row":69,"column":40},"end":{"row":69,"column":41},"action":"remove","lines":["i"],"id":1207}],[{"start":{"row":69,"column":39},"end":{"row":69,"column":40},"action":"remove","lines":["r"],"id":1208}],[{"start":{"row":69,"column":38},"end":{"row":69,"column":39},"action":"remove","lines":["b"],"id":1209}],[{"start":{"row":69,"column":37},"end":{"row":69,"column":38},"action":"remove","lines":[" "],"id":1210}],[{"start":{"row":69,"column":2},"end":{"row":69,"column":3},"action":"insert","lines":["/"],"id":1211}],[{"start":{"row":69,"column":3},"end":{"row":69,"column":4},"action":"insert","lines":["/"],"id":1212}]]},"ace":{"folds":[],"scrolltop":120,"scrollleft":0,"selection":{"start":{"row":72,"column":2},"end":{"row":72,"column":2},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1461185284000}